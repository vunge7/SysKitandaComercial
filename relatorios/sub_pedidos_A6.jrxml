<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="factura_A5_1" pageWidth="200" pageHeight="450" columnWidth="180" leftMargin="10" rightMargin="10" topMargin="2" bottomMargin="0" uuid="0f9fb78e-446c-4f21-90a6-218352fa8ee4">
	<property name="ireport.zoom" value="4.545454545454546"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="CODIGO_PEDIDO" class="java.lang.Long"/>
	<parameter name="PARM_MESA" class="java.lang.Long"/>
	<parameter name="PARM_LUGAR" class="java.lang.Long"/>
	<queryString>
		<![CDATA[select
	p.designacao ,
	sum(i.qtd) as qtd,
	i.preco,
	i.total_item ,
	l.designacao  AS lugar
from tb_item_pedidos i
inner join tb_lugares l on l.pk_lugares  = i.fk_lugares
inner join tb_produto p on p.codigo = i.fk_produtos
inner join tb_pedido pe on pe.pk_pedido = i.fk_pedidos
inner join tb_mesas m on m.pk_mesas  = pe.fk_mesas
WHERE
	i.fk_pedidos  = $P{CODIGO_PEDIDO}
	and m.pk_mesas  =  $P{PARM_MESA}
  and l.pk_lugares = $P{PARM_LUGAR}
group by p.codigo]]>
	</queryString>
	<field name="designacao" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="qtd" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="preco" class="java.lang.Double">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="total_item" class="java.lang.Double">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="lugar" class="java.lang.String"/>
	<variable name="TOTAL" class="java.lang.Double" calculation="Sum">
		<variableExpression><![CDATA[$F{qtd}.doubleValue()*$F{preco}]]></variableExpression>
	</variable>
	<background>
		<band splitType="Stretch"/>
	</background>
	<pageHeader>
		<band height="9" splitType="Stretch">
			<textField isBlankWhenNull="false">
				<reportElement uuid="33d6ee92-3b10-4447-9f43-f01e9417908e" key="textField-11" x="1" y="0" width="177" height="9"/>
				<box topPadding="2"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Times New Roman" size="6" isBold="false" isItalic="false" pdfFontName="Helvetica-Oblique"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{lugar}]]></textFieldExpression>
			</textField>
		</band>
	</pageHeader>
	<columnHeader>
		<band height="11" splitType="Stretch">
			<staticText>
				<reportElement uuid="98e40af7-4fb4-4577-8157-e2cc268bcf24" mode="Opaque" x="93" y="0" width="18" height="11" backcolor="#CCCCCC"/>
				<box leftPadding="1">
					<bottomPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Times New Roman" size="6" isBold="true"/>
				</textElement>
				<text><![CDATA[Qtd]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="f0a2a521-cc7d-4ce3-8890-81881d64faa2" mode="Opaque" x="144" y="0" width="36" height="11" backcolor="#CCCCCC"/>
				<box leftPadding="1" rightPadding="1">
					<bottomPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Times New Roman" size="6" isBold="true"/>
				</textElement>
				<text><![CDATA[Total]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="5c5eedb9-dcd0-4bf1-a620-79f9c7563deb" mode="Opaque" x="111" y="0" width="33" height="11" backcolor="#CCCCCC"/>
				<box leftPadding="1">
					<bottomPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Times New Roman" size="6" isBold="true"/>
				</textElement>
				<text><![CDATA[  P.U]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="5f33ed5f-1b33-4fe3-9a6a-04deee2e774d" mode="Opaque" x="0" y="0" width="93" height="11" backcolor="#CCCCCC"/>
				<box leftPadding="1">
					<bottomPen lineWidth="0.25"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Times New Roman" size="6" isBold="true"/>
				</textElement>
				<text><![CDATA[Descrição]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="10" splitType="Stretch">
			<textField pattern="###0" isBlankWhenNull="false">
				<reportElement uuid="8066541f-b01f-41ff-a6ae-1e724e63ac56" key="textField-17" x="93" y="0" width="18" height="10"/>
				<box>
					<bottomPen lineWidth="0.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Times New Roman" size="7" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{qtd}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00" isBlankWhenNull="true">
				<reportElement uuid="51474143-f6c2-470b-82ef-3a660f60a6da" key="textField-18" x="143" y="0" width="37" height="10"/>
				<box>
					<bottomPen lineWidth="0.0"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Times New Roman" size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{qtd}.doubleValue()*$F{preco}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="false">
				<reportElement uuid="c90dae22-4d43-430c-8f2b-2f035f7f319d" key="textField-15" x="0" y="0" width="93" height="10"/>
				<box>
					<bottomPen lineWidth="0.0"/>
				</box>
				<textElement textAlignment="Left" verticalAlignment="Middle">
					<font fontName="Times New Roman" size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{designacao}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00" isBlankWhenNull="true">
				<reportElement uuid="ddbffd43-5933-4d07-bfd1-3d3ddb287048" key="textField-18" x="111" y="0" width="32" height="10"/>
				<box>
					<bottomPen lineWidth="0.0"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Times New Roman" size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{preco}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<summary>
		<band height="12" splitType="Stretch">
			<textField pattern="#,##0.00" isBlankWhenNull="true">
				<reportElement uuid="3b441285-7ca2-419a-a507-0ab417a74fd6" key="textField-20" x="93" y="1" width="87" height="11"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Times New Roman" size="8" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{TOTAL}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement uuid="5d092299-609f-4e8d-9875-89c2f622c95e" key="staticText-11" x="0" y="1" width="93" height="11"/>
				<textElement>
					<font fontName="Times New Roman" size="8" isBold="false" isItalic="false" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<text><![CDATA[Sub Total :]]></text>
			</staticText>
			<line>
				<reportElement uuid="c5f76c73-2af7-4270-a34a-6bb164946187" x="0" y="0" width="180" height="1"/>
				<graphicElement>
					<pen lineWidth="0.5" lineStyle="Double"/>
				</graphicElement>
			</line>
		</band>
	</summary>
</jasperReport>
