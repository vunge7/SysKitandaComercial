<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="lista_venda_order_usuario" pageWidth="200" pageHeight="842" columnWidth="200" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" uuid="7fab00b9-d949-40ca-a29c-cdd498698bc6">
	<property name="ireport.zoom" value="2.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<property name="ireport.scriptlethandling" value="0"/>
	<property name="ireport.encoding" value="UTF-8"/>
	<import value="net.sf.jasperreports.engine.*"/>
	<import value="java.util.*"/>
	<import value="net.sf.jasperreports.engine.data.*"/>
	<style name="style_degradacao" mode="Opaque" backcolor="#FFFFFF">
		<conditionalStyle>
			<conditionExpression><![CDATA[$V{COLUMN_COUNT}%2==0]]></conditionExpression>
			<style mode="Opaque" backcolor="#DCDCDC"/>
		</conditionalStyle>
	</style>
	<parameter name="PARM_DATA_1" class="java.util.Date"/>
	<parameter name="PARM_DATA_2" class="java.util.Date"/>
	<parameter name="PARM_ID_USUARIO" class="java.lang.Integer"/>
	<parameter name="PARM_ARMAZEM" class="java.lang.String"/>
	<parameter name="PARM_DOCUMENTO" class="java.lang.Integer"/>
	<queryString>
		<![CDATA[SELECT DISTINCT
     tb_venda.`dataVenda` AS tb_venda_dataVenda,
     tb_venda.`codigo` AS tb_venda_codigo,
     tb_usuario.`codigo` AS tb_usuario_codigo,
     tb_usuario.`nome` AS tb_usuario_nome,
     tb_venda.`total_venda` AS tb_venda_total_venda,
     tb_venda.`hora` AS tb_venda_hora,
     tb_venda.`nome_cliente` AS tb_venda_nome_cliente,
     tb_venda.`desconto_total` AS tb_venda_desconto_total,
     tb_venda.`total_geral` AS tb_venda_total_geral,
     tb_armazem.`designacao` AS tb_armazem_designacao,
     documento.`pk_documento` AS documento_pk_documento,
     tb_venda.`cod_fact` AS tb_venda_cod_fact,
     tb_venda.`total_iva` AS tb_venda_total_iva,
     tb_venda.`nome_consumidor_final` AS tb_venda_nome_consumidor_final,
     ( SELECT getTotalPago(tb_venda.`cod_fact`) ) AS TOTAL_PAGO
     
FROM
     `tb_usuario` tb_usuario INNER JOIN `tb_venda` tb_venda ON tb_usuario.`codigo` = tb_venda.`codigo_usuario`
     INNER JOIN `tb_armazem` tb_armazem ON tb_venda.`idArmazemFK` = tb_armazem.`codigo`
     INNER JOIN `documento` documento ON tb_venda.`fk_documento` = documento.`pk_documento`
WHERE
          DATE(tb_venda.`dataVenda`) BETWEEN $P{PARM_DATA_1} AND $P{PARM_DATA_2}
	AND  tb_usuario.`codigo` = $P{PARM_ID_USUARIO}
	AND status_eliminado = 'false'
	AND credito = 'false'
	AND tb_armazem.`designacao` = $P{PARM_ARMAZEM}
	AND documento.`pk_documento` = $P{PARM_DOCUMENTO}]]>
	</queryString>
	<field name="tb_venda_dataVenda" class="java.sql.Timestamp"/>
	<field name="tb_venda_codigo" class="java.lang.Integer"/>
	<field name="tb_usuario_codigo" class="java.lang.Integer"/>
	<field name="tb_usuario_nome" class="java.lang.String"/>
	<field name="tb_venda_total_venda" class="java.math.BigDecimal"/>
	<field name="tb_venda_hora" class="java.sql.Time"/>
	<field name="tb_venda_nome_cliente" class="java.lang.String"/>
	<field name="tb_venda_desconto_total" class="java.lang.Double"/>
	<field name="tb_venda_total_geral" class="java.lang.Double"/>
	<field name="tb_armazem_designacao" class="java.lang.String"/>
	<field name="documento_pk_documento" class="java.lang.Integer"/>
	<field name="tb_venda_cod_fact" class="java.lang.String"/>
	<field name="tb_venda_total_iva" class="java.lang.Double"/>
	<field name="tb_venda_nome_consumidor_final" class="java.lang.String"/>
	<field name="TOTAL_PAGO" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<variable name="SOMA_VENDA" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{tb_venda_total_venda}.setScale( 2, RoundingMode.CEILING )]]></variableExpression>
	</variable>
	<variable name="SOMA_IVA" class="java.lang.Double" calculation="Sum">
		<variableExpression><![CDATA[$F{tb_venda_total_iva}]]></variableExpression>
	</variable>
	<variable name="SOMA_DESCONTO" class="java.lang.Double" calculation="Sum">
		<variableExpression><![CDATA[$F{tb_venda_desconto_total}]]></variableExpression>
	</variable>
	<variable name="SOMA_ILIQUIDO" class="java.lang.Double" calculation="Sum">
		<variableExpression><![CDATA[$F{tb_venda_total_geral}]]></variableExpression>
	</variable>
	<variable name="SOMA_VALOR_PAGO" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{TOTAL_PAGO}.setScale(2, RoundingMode.CEILING)]]></variableExpression>
	</variable>
	<variable name="SOMA_VALOR_DIVIDA" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{TOTAL_PAGO}.subtract($F{tb_venda_total_venda}).setScale(2, RoundingMode.FLOOR)]]></variableExpression>
	</variable>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="10" splitType="Stretch">
			<textField>
				<reportElement uuid="583b2730-ae0c-4d2a-aacb-3d94e75af499" key="staticText" x="1" y="1" width="200" height="9"/>
				<textElement verticalAlignment="Middle" markup="none">
					<font fontName="Times New Roman" size="7" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{tb_usuario_nome}]]></textFieldExpression>
			</textField>
		</band>
	</title>
	<columnHeader>
		<band height="9" splitType="Stretch">
			<staticText>
				<reportElement uuid="51402376-b1d3-4372-91eb-87f5d736e15b" key="element-90" mode="Opaque" x="25" y="0" width="70" height="9" forecolor="#000000" backcolor="#CCCCCC"/>
				<box leftPadding="2" rightPadding="2">
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial" size="7" isBold="true"/>
				</textElement>
				<text><![CDATA[Cliente]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="251aa4d8-5b1f-42b7-99d9-77114fec47b4" key="element-92" mode="Opaque" x="1" y="0" width="24" height="9" forecolor="#000000" backcolor="#CCCCCC"/>
				<box leftPadding="0" rightPadding="0">
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial" size="7" isBold="true"/>
					<paragraph leftIndent="2"/>
				</textElement>
				<text><![CDATA[Doc.]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="5ae04a89-9a12-4aa0-b33c-ecde280a9a71" key="element-90" mode="Opaque" x="95" y="0" width="35" height="9" forecolor="#000000" backcolor="#CCCCCC"/>
				<box leftPadding="2" rightPadding="2">
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Arial" size="7" isBold="true"/>
				</textElement>
				<text><![CDATA[T.Factura]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="faf550a7-b784-45bd-be36-0b4b7509de7e" key="element-90" mode="Opaque" x="130" y="0" width="35" height="9" forecolor="#000000" backcolor="#CCCCCC"/>
				<box leftPadding="2" rightPadding="2">
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Arial" size="7" isBold="true"/>
				</textElement>
				<text><![CDATA[V.Pago]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="e0ad8e29-ad38-44f1-9617-49a7da356e0d" key="element-90" mode="Opaque" x="165" y="0" width="35" height="9" forecolor="#000000" backcolor="#CCCCCC"/>
				<box leftPadding="2" rightPadding="2">
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Arial" size="7" isBold="true"/>
				</textElement>
				<text><![CDATA[DÃ­vida(Por Pagar)]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="9" splitType="Stretch">
			<textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="true">
				<reportElement uuid="0989ea5b-896c-438b-a80b-621bb21f9f73" key="textField" style="style_degradacao" x="25" y="0" width="70" height="9"/>
				<box leftPadding="2" rightPadding="2">
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.25" lineColor="#000000"/>
					<rightPen lineWidth="0.25" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Times New Roman" size="6"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{tb_venda_nome_cliente}+" ("+$F{tb_venda_nome_consumidor_final}+")"]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="true">
				<reportElement uuid="bbef10f6-88f9-4989-bb08-617ab684e08a" key="textField-1" style="style_degradacao" x="1" y="0" width="24" height="9"/>
				<box leftPadding="0" rightPadding="0">
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Times New Roman" size="6"/>
					<paragraph leftIndent="2"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{tb_venda_cod_fact}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00">
				<reportElement uuid="587ae8c1-81fa-4e16-b109-8b38a5da148d" style="style_degradacao" x="95" y="0" width="35" height="9"/>
				<box leftPadding="2" rightPadding="2">
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Times New Roman" size="6" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{tb_venda_total_venda}.setScale( 2, RoundingMode.CEILING )]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00" isBlankWhenNull="true">
				<reportElement uuid="acc5af9e-a147-4357-ab35-cc53ae1b1394" style="style_degradacao" x="130" y="0" width="35" height="9"/>
				<box leftPadding="2" rightPadding="2">
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Times New Roman" size="6"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{TOTAL_PAGO}.setScale(2,RoundingMode.CEILING)]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00" isBlankWhenNull="true">
				<reportElement uuid="fe341092-312d-4b63-878c-32632f1d7e71" style="style_degradacao" x="165" y="0" width="35" height="9"/>
				<box leftPadding="2" rightPadding="2">
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Times New Roman" size="6"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{TOTAL_PAGO}.subtract($F{tb_venda_total_venda}).setScale(2,RoundingMode.FLOOR)]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<columnFooter>
		<band splitType="Stretch"/>
	</columnFooter>
	<summary>
		<band height="9">
			<staticText>
				<reportElement uuid="a55911f3-aee7-44bf-bb90-8e71bee567b9" key="element-92" x="25" y="0" width="70" height="9" forecolor="#000000"/>
				<box leftPadding="2" rightPadding="2">
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineColor="#000000"/>
					<rightPen lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial" size="7" isBold="true"/>
				</textElement>
				<text><![CDATA[TOTAL GERAL]]></text>
			</staticText>
			<textField pattern="#,##0.00" isBlankWhenNull="true">
				<reportElement uuid="825eaec6-2c2b-48c6-ac6d-866b8054f68e" x="95" y="0" width="35" height="9"/>
				<box rightPadding="2">
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Arial" size="7" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{SOMA_VENDA}.setScale(2, RoundingMode.CEILING)]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00" isBlankWhenNull="true">
				<reportElement uuid="11efb258-ae34-4ecb-a7e9-239da95f6db2" x="130" y="0" width="35" height="9"/>
				<box rightPadding="2">
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Arial" size="7" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{SOMA_VALOR_PAGO}.setScale(2,RoundingMode.CEILING)]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00" isBlankWhenNull="true">
				<reportElement uuid="2f5f8c90-a614-4ae3-9983-68d0c93776e5" x="165" y="0" width="35" height="9"/>
				<box rightPadding="2">
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Arial" size="7" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{SOMA_VALOR_DIVIDA}.setScale(2, RoundingMode.FLOOR)]]></textFieldExpression>
			</textField>
		</band>
	</summary>
</jasperReport>
