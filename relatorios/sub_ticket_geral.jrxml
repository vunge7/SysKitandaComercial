<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="factura_A5_1" pageWidth="200" pageHeight="80" columnWidth="180" leftMargin="10" rightMargin="10" topMargin="2" bottomMargin="0" uuid="0f9fb78e-446c-4f21-90a6-218352fa8ee4">
	<property name="ireport.zoom" value="4.545454545454546"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="CODIGO_PEDIDO" class="java.lang.Long"/>
	<parameter name="PARM_MESA" class="java.lang.Long"/>
	<parameter name="PARM_LUGAR" class="java.lang.Long"/>
	<parameter name="AREA_ENVIO" class="java.lang.String"/>
	<queryString>
		<![CDATA[select
	p.designacao ,
          p.cozinha,
	sum(i.qtd) as qtd,
	i.preco,
	i.total_item ,
	l.designacao  AS lugar
from tb_item_pedidos i
inner join tb_lugares l on l.pk_lugares  = i.fk_lugares
inner join tb_produto p on p.codigo = i.fk_produtos
inner join tb_pedido pe on pe.pk_pedido = i.fk_pedidos
inner join tb_mesas m on m.pk_mesas  = pe.fk_mesas
WHERE
	i.fk_pedidos  = $P{CODIGO_PEDIDO}
	and m.pk_mesas  =  $P{PARM_MESA}
  and l.pk_lugares = $P{PARM_LUGAR} AND p.cozinha = $P{AREA_ENVIO}
group by p.codigo]]>
	</queryString>
	<field name="designacao" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="cozinha" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="qtd" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="preco" class="java.lang.Double">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="total_item" class="java.lang.Double">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="lugar" class="java.lang.String"/>
	<variable name="TOTAL" class="java.lang.Double" calculation="Sum">
		<variableExpression><![CDATA[$F{qtd}.doubleValue()*$F{preco}]]></variableExpression>
	</variable>
	<background>
		<band splitType="Stretch"/>
	</background>
	<pageHeader>
		<band height="8" splitType="Stretch">
			<textField isBlankWhenNull="false">
				<reportElement uuid="33d6ee92-3b10-4447-9f43-f01e9417908e" key="textField-11" x="1" y="0" width="51" height="8"/>
				<box topPadding="2"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Times New Roman" size="5" isBold="true" isItalic="false" pdfFontName="Helvetica-Oblique"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{lugar}]]></textFieldExpression>
			</textField>
		</band>
	</pageHeader>
	<columnHeader>
		<band height="11" splitType="Stretch">
			<staticText>
				<reportElement uuid="98e40af7-4fb4-4577-8157-e2cc268bcf24" mode="Opaque" x="140" y="0" width="40" height="11" backcolor="#FFFFFF"/>
				<box leftPadding="1">
					<bottomPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Arial" size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[Qtd]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="5f33ed5f-1b33-4fe3-9a6a-04deee2e774d" mode="Opaque" x="0" y="0" width="140" height="11" backcolor="#FFFFFF"/>
				<box leftPadding="1">
					<pen lineWidth="0.0"/>
					<topPen lineWidth="0.0"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial" size="8" isBold="false"/>
				</textElement>
				<text><![CDATA[Designação]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="10" splitType="Stretch">
			<textField pattern="###0" isBlankWhenNull="false">
				<reportElement uuid="8066541f-b01f-41ff-a6ae-1e724e63ac56" key="textField-17" x="140" y="0" width="40" height="10"/>
				<box>
					<pen lineWidth="0.5"/>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Arial" size="8" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{qtd}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="false">
				<reportElement uuid="c90dae22-4d43-430c-8f2b-2f035f7f319d" key="textField-15" x="0" y="0" width="140" height="10"/>
				<box>
					<pen lineWidth="0.5"/>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Left" verticalAlignment="Middle">
					<font fontName="Arial" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{designacao}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
</jasperReport>
