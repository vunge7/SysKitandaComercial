<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="relatorio_diario_produtos" language="groovy" pageWidth="595" pageHeight="842" columnWidth="595" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="4" uuid="963621be-cfd4-4f53-8a8b-bed5b630fd64">
	<property name="ireport.zoom" value="3.543122000000002"/>
	<property name="ireport.x" value="917"/>
	<property name="ireport.y" value="0"/>
	<parameter name="CODIGO_PRODUTO" class="java.lang.Integer">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="PARM_DATA_2" class="java.util.Date"/>
	<parameter name="PARM_DATA_1" class="java.util.Date"/>
	<queryString>
		<![CDATA[SELECT
    p.codigo,
    p.designacao,
    p.codigo_manual,
    pr.preco_venda,
    pr.data,
    SUM(iv.quantidade) AS quantidade,
    SUM(iv.total) AS total_vendido
FROM tb_item_venda iv
JOIN tb_venda v     ON iv.codigo_venda = v.codigo
JOIN tb_produto p   ON iv.codigo_produto = p.codigo
JOIN tb_preco pr    ON iv.fk_preco = pr.pk_preco
WHERE
  iv.codigo_produto = $P{CODIGO_PRODUTO} AND DATE(v.dataVenda) BETWEEN $P{PARM_DATA_1} AND $P{PARM_DATA_2}
  AND v.fk_documento IN (1,2)
  AND v.status_eliminado = 'false'
GROUP BY pr.preco_venda
ORDER BY pr.preco_venda;]]>
	</queryString>
	<field name="codigo" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="designacao" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="codigo_manual" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="preco_venda" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="data" class="java.sql.Date">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="quantidade" class="java.lang.Double">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="total_vendido" class="java.math.BigDecimal"/>
	<variable name="TOTAL" class="java.lang.Integer" calculation="Sum">
		<variableExpression><![CDATA[$F{quantidade}]]></variableExpression>
	</variable>
	<variable name="TOTAL_VENDAS" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{total_vendido}]]></variableExpression>
	</variable>
	<variable name="TOTAL_VENDAS_1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{total_vendido}]]></variableExpression>
	</variable>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="11" splitType="Stretch">
			<textField>
				<reportElement uuid="f0cacb5c-17e5-4082-b2ff-fe0e8a8e4d8b" x="71" y="0" width="241" height="11"/>
				<box leftPadding="5">
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Times New Roman" size="9" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{designacao}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement uuid="d4a67c77-a30d-4aa2-8a7e-555096cd501b" x="10" y="0" width="61" height="11"/>
				<box leftPadding="5">
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Times New Roman" size="9" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{codigo_manual}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement uuid="328cff39-650a-45ca-8403-c158a9a04309" mode="Opaque" x="436" y="0" width="40" height="11" forecolor="#FFFFFF" backcolor="#666666"/>
				<box>
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Times New Roman" size="9"/>
				</textElement>
				<text><![CDATA[Qtd]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="10d5dc3e-5f88-40f6-b1c7-30ba633ba1aa" mode="Opaque" x="475" y="0" width="63" height="11" forecolor="#FFFFFF" backcolor="#666666"/>
				<box rightPadding="8">
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Times New Roman" size="9"/>
				</textElement>
				<text><![CDATA[Valor Total]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="2b54772d-0630-4940-b3b7-fa5a80a29d62" mode="Opaque" x="382" y="0" width="54" height="11" forecolor="#FFFFFF" backcolor="#666666"/>
				<box>
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Times New Roman" size="9"/>
				</textElement>
				<text><![CDATA[Preço Venda]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="053d1575-7c0a-457d-ac46-77cbd49e9ded" mode="Opaque" x="312" y="0" width="70" height="11" forecolor="#FFFFFF" backcolor="#666666"/>
				<box>
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Times New Roman" size="9"/>
				</textElement>
				<text><![CDATA[Data Atualização]]></text>
			</staticText>
		</band>
	</title>
	<detail>
		<band height="11" splitType="Stretch">
			<textField>
				<reportElement uuid="cc4211e8-62d2-4aee-89ff-8a264dfd5a32" x="436" y="0" width="39" height="11"/>
				<box>
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Times New Roman" size="9" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{quantidade}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00">
				<reportElement uuid="37a86896-f6ed-42ba-a056-f68fa8ab9a51" x="382" y="0" width="54" height="11"/>
				<box rightPadding="2">
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Times New Roman" size="9" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{preco_venda}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00">
				<reportElement uuid="0c1ac374-ec3e-46b0-aebf-7c204afb9d6d" x="475" y="0" width="63" height="11"/>
				<box rightPadding="2">
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Times New Roman" size="9" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{total_vendido}]]></textFieldExpression>
			</textField>
			<textField pattern="dd/MM/yyyy">
				<reportElement uuid="d49d3b40-9015-4217-a2bf-59fd3890e50a" x="312" y="0" width="70" height="11"/>
				<box rightPadding="2">
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Times New Roman" size="9" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{data}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<summary>
		<band height="12">
			<textField>
				<reportElement uuid="5c6ba69d-6f3d-4f80-806f-711d5a43b8c2" x="436" y="0" width="39" height="12"/>
				<box>
					<bottomPen lineWidth="0.75"/>
					<rightPen lineWidth="0.75"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Times New Roman" size="10" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{TOTAL}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement uuid="42569d8c-a043-45d5-82a4-62a988cfcf7c" x="382" y="0" width="54" height="12"/>
				<box rightPadding="2">
					<pen lineWidth="0.5"/>
					<topPen lineWidth="0.0"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Times New Roman" size="10" isBold="true"/>
				</textElement>
				<text><![CDATA[Sub Total:]]></text>
			</staticText>
			<textField pattern="#,##0.00">
				<reportElement uuid="29476ef1-b2c7-4f86-a545-115b078b6af5" x="475" y="0" width="63" height="12"/>
				<box rightPadding="2">
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.75"/>
					<rightPen lineWidth="0.75"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Times New Roman" size="10" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{TOTAL_VENDAS}]]></textFieldExpression>
			</textField>
		</band>
	</summary>
</jasperReport>
