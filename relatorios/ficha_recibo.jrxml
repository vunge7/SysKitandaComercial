<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="factura" pageWidth="595" pageHeight="842" columnWidth="535" leftMargin="30" rightMargin="30" topMargin="20" bottomMargin="20" isSummaryWithPageHeaderAndFooter="true" uuid="0de43986-9be5-410e-aaa3-7f1419d0abca">
	<property name="ireport.scriptlethandling" value="0"/>
	<property name="ireport.encoding" value="UTF-8"/>
	<property name="ireport.zoom" value="1.5"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="45"/>
	<property name="com.jaspersoft.studio.data.sql.tables" value=""/>
	<property name="com.jaspersoft.studio.data.sql.SQLQueryDesigner.sash.w1" value="479"/>
	<property name="com.jaspersoft.studio.data.sql.SQLQueryDesigner.sash.w2" value="521"/>
	<property name="com.jaspersoft.studio.data.defaultdataadapter" value="DataAdapterTest.xml"/>
	<import value="net.sf.jasperreports.engine.*"/>
	<import value="java.util.*"/>
	<import value="net.sf.jasperreports.engine.data.*"/>
	<style name="cliente_style" mode="Transparent" forecolor="#000000">
		<conditionalStyle>
			<conditionExpression><![CDATA[$P{NIF_CLIENTE_CONSOMIDOR_FINAL}.equals("Consumidor Final")]]></conditionExpression>
			<style mode="Opaque" forecolor="#FFFFFF" backcolor="#FFFFFF"/>
		</conditionalStyle>
	</style>
	<parameter name="SUBREPORT_DIR" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["../relatorios/"]]></defaultValueExpression>
	</parameter>
	<parameter name="ID_FICHA" class="java.lang.Integer">
		<defaultValueExpression><![CDATA[1]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[select tb_dados_instituicao.nome, tb_dados_instituicao.enderecos, tb_dados_instituicao.nif, tb_dados_instituicao.telefone, tb_dados_instituicao.email, l.*, f.*, u.nome usuario , p.designacao produto , p.photo as foto
from  tb_dados_instituicao, linha_ficha_tecnica l
inner join tb_produto p on p.codigo = l.igrendiente_id
inner join ficha_tecnica f on f.id = l.ficha_tecnica_id
inner join tb_usuario u on u.codigo = usuario_id_criacao
where
f.id =  $P{ID_FICHA}]]>
	</queryString>
	<field name="nome" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.label" value="nome"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="tb_dados_instituicao"/>
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="enderecos" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.label" value="enderecos"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="tb_dados_instituicao"/>
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="nif" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.label" value="nif"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="tb_dados_instituicao"/>
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="telefone" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.label" value="telefone"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="tb_dados_instituicao"/>
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="email" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.label" value="email"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="tb_dados_instituicao"/>
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="id" class="java.lang.Long">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="igrendiente_id" class="java.lang.Long">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="igrendiente_designacao" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="unidade" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="preco_unitario" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="qtd_bruto" class="java.lang.Double">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="qtd_liquido" class="java.lang.Double">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="factor_correcao" class="java.lang.Double">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="custo_total" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="ficha_tecnica_id" class="java.lang.Long">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="unidade_compra" class="java.lang.Double">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="produto_id" class="java.lang.Long">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="data_criacao" class="java.sql.Timestamp">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="usuario_id_criacao" class="java.lang.Long">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="data_actualizacao" class="java.sql.Timestamp">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="usuario_id_actualizacao" class="java.lang.Long">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="custo_produto" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="percentagem_ganho" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="custo_venda" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="photo" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="qtd_composto" class="java.lang.Double">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="prato" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="usuario" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.label" value="usuario"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="tb_usuario"/>
	</field>
	<field name="produto" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.label" value="produto"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="tb_produto"/>
	</field>
	<field name="foto" class="java.lang.String"/>
	<variable name="SOMA_2" class="java.lang.Double" calculation="Sum">
		<variableExpression><![CDATA[]]></variableExpression>
	</variable>
	<pageHeader>
		<band height="227">
			<frame>
				<reportElement uuid="731e03bb-a294-4f68-8355-bb3720b91036" mode="Opaque" x="171" y="0" width="365" height="167" backcolor="#999999"/>
				<staticText>
					<reportElement uuid="5ce0ba94-5009-494b-90d4-4d58e9bad76c" x="46" y="15" width="207" height="32" forecolor="#FFFFFF"/>
					<textElement textAlignment="Center">
						<font size="22" isBold="true"/>
					</textElement>
					<text><![CDATA[FICHA TÉCNICA]]></text>
				</staticText>
			</frame>
			<image>
				<reportElement uuid="3d901fa5-2829-44e6-a364-075228e552cf" x="3" y="0" width="152" height="116"/>
				<imageExpression><![CDATA[new java.io.ByteArrayInputStream(org.apache.commons.codec.binary.Base64.decodeBase64($F{photo}.getBytes())) ]]></imageExpression>
			</image>
			<textField>
				<reportElement uuid="0064b1a2-5127-4df8-a22a-73f0903c98d5" x="26" y="138" width="116" height="20"/>
				<textElement/>
				<textFieldExpression><![CDATA[$F{prato}]]></textFieldExpression>
			</textField>
		</band>
	</pageHeader>
	<columnHeader>
		<band height="12" splitType="Stretch">
			<staticText>
				<reportElement uuid="587c0c3e-44fb-4571-9a78-b2cfff938c72" key="element-93" mode="Opaque" x="52" y="0" width="150" height="12" forecolor="#000000" backcolor="#CCCCCC"/>
				<box leftPadding="2" rightPadding="2">
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement>
					<font fontName="Times New Roman" isBold="true"/>
				</textElement>
				<text><![CDATA[Ingredientes]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="b03931da-ada4-4bef-af47-fa3be32e12a9" key="element-93" mode="Opaque" x="202" y="0" width="80" height="12" forecolor="#000000" backcolor="#CCCCCC"/>
				<box leftPadding="2" rightPadding="2">
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement>
					<font fontName="Times New Roman" isBold="true"/>
				</textElement>
				<text><![CDATA[Cod. Isenção]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="1379b50b-82d2-44d8-8555-0abfdcfc39df" key="element-91" mode="Opaque" x="1" y="0" width="18" height="12" forecolor="#000000" backcolor="#CCCCCC"/>
				<box leftPadding="2" rightPadding="2">
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.75" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement>
					<font fontName="Times New Roman" isBold="true"/>
				</textElement>
				<text><![CDATA[Nº.]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="7ffd67ec-0515-45f7-b968-5293d97990ae" key="element-96" mode="Opaque" x="461" y="0" width="74" height="12" forecolor="#000000" backcolor="#CCCCCC"/>
				<box leftPadding="2" rightPadding="2">
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement>
					<font fontName="Times New Roman" isBold="true"/>
				</textElement>
				<text><![CDATA[Valor c/Imposto]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="2d70dbc8-1c6b-4326-98e8-fdafcc6461af" key="element-95" mode="Opaque" x="339" y="0" width="48" height="12" forecolor="#000000" backcolor="#CCCCCC"/>
				<box leftPadding="2" rightPadding="2">
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement>
					<font fontName="Times New Roman" isBold="true"/>
				</textElement>
				<text><![CDATA[Pr. Unit.]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="3bd2f258-da4d-478f-9ed0-ec9fe81908c2" key="element-95" mode="Opaque" x="387" y="0" width="37" height="12" forecolor="#000000" backcolor="#CCCCCC"/>
				<box leftPadding="2" rightPadding="2">
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement>
					<font fontName="Times New Roman" isBold="true"/>
				</textElement>
				<text><![CDATA[Desc.%]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="43405548-73cc-43c6-9bbf-e6102c7a224c" key="element-95" mode="Opaque" x="281" y="0" width="58" height="12" forecolor="#000000" backcolor="#CCCCCC"/>
				<box leftPadding="2" rightPadding="2">
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement>
					<font fontName="Times New Roman" isBold="true"/>
				</textElement>
				<text><![CDATA[Qtd.]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="0e09ec67-e673-4401-8a44-c71c2bb03eb5" key="element-95" mode="Opaque" x="424" y="0" width="37" height="12" forecolor="#000000" backcolor="#CCCCCC"/>
				<box leftPadding="2" rightPadding="2">
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement>
					<font fontName="Times New Roman" isBold="true"/>
				</textElement>
				<text><![CDATA[Taxa%]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="25" splitType="Stretch">
			<textField isBlankWhenNull="false">
				<reportElement uuid="ea5218f4-f3b3-4199-9a0d-3df5df401fde" key="textField-15" x="52" y="0" width="150" height="25"/>
				<box leftPadding="2">
					<topPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
				</box>
				<textElement>
					<font fontName="Times New Roman" size="11"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{igrendiente_designacao}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<columnFooter>
		<band splitType="Stretch"/>
	</columnFooter>
	<pageFooter>
		<band height="159"/>
	</pageFooter>
	<lastPageFooter>
		<band height="80"/>
	</lastPageFooter>
	<summary>
		<band height="156">
			<rectangle radius="10">
				<reportElement uuid="c45da166-9c7c-4ee2-b6dd-c363207b6607" x="349" y="15" width="187" height="65"/>
				<graphicElement>
					<pen lineStyle="Dotted"/>
				</graphicElement>
			</rectangle>
			<staticText>
				<reportElement uuid="a5cf2ca7-53d7-4cbe-8c9d-210109bfcdf4" key="staticText-11" x="355" y="19" width="105" height="14"/>
				<textElement markup="none">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Total Ilíquido:]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="8c7cb66f-0a95-484c-8759-1e0a0bdd6e21" key="staticText-11" x="355" y="32" width="105" height="14"/>
				<textElement markup="none">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Desconto Comercial:]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="da57f749-7be8-493c-bc7e-2e5b6f55bb1a" key="staticText-11" x="355" y="45" width="105" height="14"/>
				<textElement markup="none">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Total IVA:]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="657cf5f1-15f3-43c8-afd2-e026a5e25879" key="staticText-11" x="355" y="60" width="105" height="14"/>
				<textElement markup="none">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Total(AOA):]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="192e0406-c2c6-4d35-843f-6d98c08305b6" key="staticText-11" mode="Opaque" x="360" y="5" width="40" height="15" backcolor="#D4D2D2"/>
				<textElement markup="none">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Resumo]]></text>
			</staticText>
			<line>
				<reportElement uuid="0b1778f0-b9c8-4f70-9636-ea9f104f1df2" x="-1" y="0" width="536" height="1"/>
			</line>
		</band>
	</summary>
</jasperReport>
