<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="sub1_stock" language="groovy" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="5" bottomMargin="5" uuid="5342d3e6-c1f4-4891-82db-a86eaaf11a56">
	<property name="ireport.zoom" value="4.0"/>
	<property name="ireport.x" value="1227"/>
	<property name="ireport.y" value="0"/>
	<parameter name="ID_TIPO_PRODUTO" class="java.lang.Integer"/>
	<parameter name="PARM_ID_ARMAZEM" class="java.lang.Integer"/>
	<queryString>
		<![CDATA[SELECT

     produto_imposto.`pk_produto_imposto` AS produto_imposto_pk_produto_imposto,
     tb_produto.`codigo` AS tb_produto_codigo,
     tb_produto.`designacao` AS tb_produto_designacao,
     tb_produto.`fk_modelo` AS tb_produto_fk_modelo,
     tb_produto.`fk_grupo` AS tb_produto_fk_grupo,
     tb_produto.`photo` AS tb_produto_photo,
     tb_produto.`estado_quarto` AS tb_produto_estado_quarto,
     tb_produto.`cod_Tipo_Produto` AS tb_produto_cod_Tipo_Produto,
     tb_produto.`fk_grupo` AS fk_grupo,
     tb_tipo_produto.`codigo` AS tb_tipo_produto_codigo,
     tb_tipo_produto.`designacao` AS tb_tipo_produto_designacao,
     imposto.`descricao` AS imposto_descricao,
     imposto.`taxa` AS imposto_taxa,
    ( SELECT  MAX(tb_preco.`pk_preco`) AS MAX_PRECO FROM `tb_preco` tb_preco WHERE tb_preco.`fk_produto`  =  tb_produto.`codigo`)
      AS MAX_COD_PRECO,

     ( SELECT  tb_preco.`preco_compra` AS M_P FROM `tb_preco` tb_preco WHERE tb_preco.`pk_preco`  =  MAX_COD_PRECO)
      AS MAX_PRECO_COMPRA,


    ( SELECT  MAX(tb_preco.`preco_venda`) AS M_V FROM `tb_preco` tb_preco WHERE tb_preco.`pk_preco`  =  MAX_COD_PRECO)
      AS MAX_PRECO_VENDA


FROM
     `tb_produto` tb_produto INNER JOIN `produto_imposto` produto_imposto ON tb_produto.`codigo` = produto_imposto.`fk_produto`
     INNER JOIN `tb_tipo_produto` tb_tipo_produto ON tb_produto.`cod_Tipo_Produto` = tb_tipo_produto.`codigo`
     INNER JOIN `imposto` imposto ON produto_imposto.`fk_imposto` = imposto.`pk_imposto`
WHERE
     tb_tipo_produto.`codigo` = $P{ID_TIPO_PRODUTO}
AND tb_produto.`fk_grupo` <> 1]]>
	</queryString>
	<field name="produto_imposto_pk_produto_imposto" class="java.lang.Integer"/>
	<field name="tb_produto_codigo" class="java.lang.Integer"/>
	<field name="tb_produto_designacao" class="java.lang.String"/>
	<field name="tb_produto_fk_modelo" class="java.lang.Integer"/>
	<field name="tb_produto_fk_grupo" class="java.lang.Integer"/>
	<field name="tb_produto_photo" class="java.lang.Object"/>
	<field name="tb_produto_estado_quarto" class="java.lang.String"/>
	<field name="tb_produto_cod_Tipo_Produto" class="java.lang.Integer"/>
	<field name="tb_tipo_produto_codigo" class="java.lang.Integer"/>
	<field name="tb_tipo_produto_designacao" class="java.lang.String"/>
	<field name="imposto_descricao" class="java.lang.String"/>
	<field name="imposto_taxa" class="java.lang.Double"/>
	<field name="MAX_COD_PRECO" class="java.lang.Long"/>
	<field name="MAX_PRECO_COMPRA" class="java.math.BigDecimal"/>
	<field name="MAX_PRECO_VENDA" class="java.math.BigDecimal"/>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="16">
			<textField>
				<reportElement uuid="02aff1d0-c060-48ea-a8c0-2918524cdc54" mode="Opaque" x="0" y="0" width="202" height="16" forecolor="#FFFFFF" backcolor="#999999"/>
				<textElement verticalAlignment="Middle" markup="none">
					<font fontName="Times New Roman" size="11" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{tb_tipo_produto_designacao}]]></textFieldExpression>
			</textField>
		</band>
	</title>
	<columnHeader>
		<band height="13" splitType="Stretch">
			<staticText>
				<reportElement uuid="f8769786-9548-4a4e-843e-289587c488be" x="0" y="0" width="56" height="13" forecolor="#000000"/>
				<box leftPadding="2">
					<pen lineColor="#666666"/>
					<topPen lineWidth="0.5" lineColor="#666666"/>
					<leftPen lineWidth="0.5" lineColor="#666666"/>
					<bottomPen lineWidth="0.5" lineColor="#666666"/>
					<rightPen lineWidth="0.5" lineColor="#666666"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Times New Roman" size="10" isBold="true"/>
				</textElement>
				<text><![CDATA[Cod. Prod.]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="a26c77f7-7957-44f6-9027-c6d8f4a8b29a" x="56" y="0" width="286" height="13" forecolor="#000000"/>
				<box leftPadding="2">
					<pen lineColor="#666666"/>
					<topPen lineWidth="0.5" lineColor="#666666"/>
					<leftPen lineWidth="0.5" lineColor="#666666"/>
					<bottomPen lineWidth="0.5" lineColor="#666666"/>
					<rightPen lineWidth="0.5" lineColor="#666666"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Times New Roman" size="10" isBold="true"/>
				</textElement>
				<text><![CDATA[Designação]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="3703a2e4-1bb7-43cf-bf31-402f16d2d1c5" x="380" y="0" width="67" height="13" forecolor="#000000"/>
				<box leftPadding="2">
					<pen lineColor="#666666"/>
					<topPen lineWidth="0.5" lineColor="#666666"/>
					<leftPen lineWidth="0.5" lineColor="#666666"/>
					<bottomPen lineWidth="0.5" lineColor="#666666"/>
					<rightPen lineWidth="0.5" lineColor="#666666"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Times New Roman" size="10" isBold="true"/>
				</textElement>
				<text><![CDATA[PV s IVA]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="39befd95-8bc4-4d91-bdc2-9ad09f6adad2" x="342" y="0" width="38" height="13" forecolor="#000000"/>
				<box leftPadding="2">
					<pen lineColor="#666666"/>
					<topPen lineWidth="0.5" lineColor="#666666"/>
					<leftPen lineWidth="0.5" lineColor="#666666"/>
					<bottomPen lineWidth="0.5" lineColor="#666666"/>
					<rightPen lineWidth="0.5" lineColor="#666666"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Times New Roman" size="10" isBold="true"/>
				</textElement>
				<text><![CDATA[Taxa]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="6c03e58a-3f9b-4a41-a612-03117151d4a1" x="488" y="0" width="67" height="13" forecolor="#000000"/>
				<box leftPadding="2">
					<pen lineColor="#666666"/>
					<topPen lineWidth="0.5" lineColor="#666666"/>
					<leftPen lineWidth="0.5" lineColor="#666666"/>
					<bottomPen lineWidth="0.5" lineColor="#666666"/>
					<rightPen lineWidth="0.5" lineColor="#666666"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Times New Roman" size="10" isBold="true"/>
				</textElement>
				<text><![CDATA[P.V c IVA]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="fd4cdb1b-a313-4159-9e4e-c3e602dc1659" x="447" y="0" width="41" height="13" forecolor="#000000"/>
				<box leftPadding="2">
					<pen lineColor="#666666"/>
					<topPen lineWidth="0.5" lineColor="#666666"/>
					<leftPen lineWidth="0.5" lineColor="#666666"/>
					<bottomPen lineWidth="0.5" lineColor="#666666"/>
					<rightPen lineWidth="0.5" lineColor="#666666"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Times New Roman" size="10" isBold="true"/>
				</textElement>
				<text><![CDATA[Imposto]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="11" splitType="Stretch">
			<textField>
				<reportElement uuid="ae67ec88-ae13-4dfe-b0b6-6e98cde89187" x="56" y="0" width="286" height="11"/>
				<box leftPadding="2">
					<pen lineStyle="Solid" lineColor="#666666"/>
					<topPen lineStyle="Solid" lineColor="#666666"/>
					<leftPen lineStyle="Solid" lineColor="#666666"/>
					<bottomPen lineWidth="0.25" lineStyle="Solid" lineColor="#666666"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#666666"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Times New Roman" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{tb_produto_designacao}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement uuid="aece4ee0-f6f9-4e5f-b58a-20ad48c4beb5" x="0" y="0" width="56" height="11"/>
				<box leftPadding="2">
					<pen lineStyle="Solid" lineColor="#666666"/>
					<topPen lineStyle="Solid" lineColor="#666666"/>
					<leftPen lineStyle="Solid" lineColor="#666666"/>
					<bottomPen lineWidth="0.25" lineStyle="Solid" lineColor="#666666"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#666666"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Times New Roman" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{tb_produto_codigo}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00" isBlankWhenNull="true">
				<reportElement uuid="f1c66ba1-bc96-4f3b-8d57-67936a2d7445" x="380" y="0" width="67" height="11"/>
				<box leftPadding="2">
					<pen lineStyle="Solid" lineColor="#666666"/>
					<topPen lineStyle="Solid" lineColor="#666666"/>
					<leftPen lineStyle="Solid" lineColor="#666666"/>
					<bottomPen lineWidth="0.25" lineStyle="Solid" lineColor="#666666"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#666666"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Times New Roman" size="8" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{MAX_PRECO_VENDA}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00" isBlankWhenNull="true">
				<reportElement uuid="3b9a4b30-4722-485e-840e-f4f840689acb" x="342" y="0" width="38" height="11"/>
				<box leftPadding="2">
					<pen lineStyle="Solid" lineColor="#666666"/>
					<topPen lineStyle="Solid" lineColor="#666666"/>
					<leftPen lineStyle="Solid" lineColor="#666666"/>
					<bottomPen lineWidth="0.25" lineStyle="Solid" lineColor="#666666"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#666666"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Times New Roman" size="8" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{imposto_taxa}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00" isBlankWhenNull="true">
				<reportElement uuid="67628b86-7034-4252-a023-32ba3deeb072" x="447" y="0" width="41" height="11"/>
				<box leftPadding="2">
					<pen lineStyle="Solid" lineColor="#666666"/>
					<topPen lineStyle="Solid" lineColor="#666666"/>
					<leftPen lineStyle="Solid" lineColor="#666666"/>
					<bottomPen lineWidth="0.25" lineStyle="Solid" lineColor="#666666"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#666666"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Times New Roman" size="8" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[(  $F{MAX_PRECO_VENDA} * ( $F{imposto_taxa} / 100 ) )]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00" isBlankWhenNull="true">
				<reportElement uuid="66694670-e0c8-4953-818d-7d5bce891389" x="488" y="0" width="67" height="11"/>
				<box leftPadding="2">
					<pen lineStyle="Solid" lineColor="#666666"/>
					<topPen lineStyle="Solid" lineColor="#666666"/>
					<leftPen lineStyle="Solid" lineColor="#666666"/>
					<bottomPen lineWidth="0.25" lineStyle="Solid" lineColor="#666666"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#666666"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Times New Roman" size="8" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{MAX_PRECO_VENDA}  +  (  $F{MAX_PRECO_VENDA} * ( $F{imposto_taxa} / 100 ) )]]></textFieldExpression>
			</textField>
		</band>
	</detail>
</jasperReport>
